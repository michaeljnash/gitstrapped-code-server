@@
-validate_github_username(){ # $1=username
-  u="$1"; [ -n "$u" ] || return 0
+validate_github_username(){ # accept arg or fall back to $GITHUB_USERNAME
+  u="${1:-${GITHUB_USERNAME:-}}"; [ -n "$u" ] || return 0
   code="$(curl -s -o /dev/null -w "%{http_code}" -H "Accept: application/vnd.github+json" "https://api.github.com/users/${u}" || echo "000")"
@@
-validate_github_token(){ # $1=token
-  t="$1"; [ -n "$t" ] || return 0
+validate_github_token(){ # accept arg or fall back to $GITHUB_TOKEN
+  t="${1:-${GITHUB_TOKEN:-}}"; [ -n "$t" ] || return 0
   code="$(curl -s -o /dev/null -w "%{http_code}" \
@@
 git config --global --add safe.directory "*"
 git config --global user.name "${GIT_NAME:-codestrap}" || true
-if [ -z "${GIT_EMAIL:-}" ]; then GIT_EMAIL="$(resolve_email || true)"; fi
+if [ -z "${GIT_EMAIL:-}" ]; then GIT_EMAIL="$(resolve_email "$GITHUB_USERNAME" "$GITHUB_TOKEN" || true)"; fi
 git config --global user.email "$GIT_EMAIL" || true
 log "identity: ${GIT_NAME:-} <${GIT_EMAIL:-}>"
